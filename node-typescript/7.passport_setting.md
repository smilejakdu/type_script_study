
ì´ì œ ë¡œê·¸ì¸ ìª½ ì„¤ì •ì„ í•´ë³¼ê²ƒì´ë‹¤.

ì´ì „ì— models ë“¤ì„ ì‘ì„±í–ˆì—ˆë‚˜ , ê·¸ ëª¨ë¸ë“¤ì„ ê·¸ëƒ¥ ì‚¬ìš©í• ìˆ˜ìˆëŠ”ê²ƒì´ ì•„ë‹ˆë¼ ,
index.ts ì—ë‹¤ê°€ ì—°ê²°ì„ í•´ì¤˜ì•¼í•œë‹¤.

# ğŸ“Œ models sequelize ì™€ index.ts ì—°ê²°
![7.passport ì„¤ì •í•˜ê¸° image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/23d3b510b1c8425c8f4edbe73b62db74/ef6f95b0-4efc-4032-9dab-af7449872ee7.png)

models í´ë”ì— sequelize ë¥¼ í†µí•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•´ì¤€ë‹¤.

__sequelize.ts__

```ts
import { Sequelize } from 'sequelize';
import config from '../config/config';

const env = process.env.NODE_ENV as ('production' | 'test' | 'development') || 'development';
const { database, username, password } = config[env];
const sequelize = new Sequelize(database, username, password, config[env]);

export { sequelize };
export default sequelize;
```

ì´ëŸ¬í•œ sequelize.ts ë¥¼ models.index.ts ì— ë¶ˆëŸ¬ì˜¤ê³ .
ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì´ë ‡ê²Œ ì—°ê²°ì„ í•œë‹¤.

![7.passport ì„¤ì •í•˜ê¸° image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/23d3b510b1c8425c8f4edbe73b62db74/5acca35f-ce70-48a5-861e-f507eaa94db7.png)

models/index.ts ì—ì„œëŠ” ì§€ê¸ˆê¹Œì§€ ë§Œë“¤ì–´ ë‘ì—ˆë˜ ëª¨ë“  ëª¨ë¸ë“¤ì„ index.ts ì— ì—°ê²°í•˜ê²Œ ëœë‹¤.

![7.passport ì„¤ì •í•˜ê¸° image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/23d3b510b1c8425c8f4edbe73b62db74/06bec1fe-20c1-485c-989d-f5491808e1e6.png)

# ğŸ“Œ passport/index.ts

passport ì„¤ì •ì„ í•´ì¤€ë‹¤.

ê·¸ë¦¬ê³  ë‚˜ì„œ `routes` ë¡œ ë„˜ì–´ê°€ë„ë¡ í•œë‹¤.

![7.passport ì„¤ì •í•˜ê¸° image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/23d3b510b1c8425c8f4edbe73b62db74/1f3b516d-adab-4a90-a478-f4b9b955ad5a.png)

í´ë˜ìŠ¤ë¡œ ì„ ì–¸ì„ í–ˆì§€ë§Œ ì´ê²ƒì„ type ìœ¼ë¡œ ì‚¬ìš©ì„ í•  ìˆ˜ ìˆê²Œ ë•Œë¬¸ì— ë¶ˆëŸ¬ì™€ì„œ íƒ€ì…ì²˜ëŸ¼ ì‚¬ìš©í•œë‹¤.

![7.passport ì„¤ì •í•˜ê¸° image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/23d3b510b1c8425c8f4edbe73b62db74/fd6d767f-e9a1-4ccf-abc5-00863440a749.png)

ì‚¬ì‹¤ User ëŠ” í´ë˜ìŠ¤ë‹ˆê¹ user ëŠ” User ì˜ ì¸ìŠ¤í„´ìŠ¤ë¼ê³  ìƒê°í•˜ëŠ”ê²Œ ì¢€ë” ìƒê°í•˜ê¸°ì— í¸ë¦¬í•˜ê¸°ë„ í•˜ë‹¤.

```ts
import passport from 'passport';

import User from '../models/user';
import local from './local';

export default () => {
  passport.serializeUser<User, number>((user, done) => {
    done(null, user.id);
  });

  passport.deserializeUser<User, number>(async (id, done) => {
    try {
      // ë©”ëª¨ë¦¬ì— ì €ì¥í–ˆë˜ ì‚¬ìš©ì ì•„ì´ë””ë¥¼ ì‚¬ìš©ì ê°ì²´ë¡œ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜
      // include ë„ ì„¤ì •í•´ì•¼í•˜ì§€ë§Œ ê´€ê³„ì„¤ì •ì„ ì•„ì§ ì•ˆí•´ì„œ ì ì§€ ì•ŠëŠ”ë‹¤.
      const user = await User.findOne({
        where: { id },
      });
      if (!user) {
        return done(new Error('no user'));
      }
      return done(null, user); // req.user
    } catch (err) {
      console.error(err);
      return done(err);
    }
  });

  local();
}
```



