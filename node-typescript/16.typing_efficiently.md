vscode ì™€ webstorm ì´ë‘ ë‹¨ì¶•í‚¤ê°€ ì™„ì „ ë”´íŒì´ë‹¤ .

ê·¸ë˜ì„œ ë‹¨ì¶•í‚¤ë¥¼ ê·¸ëƒ¥ í†µì¼ ì‹œì¼œë²„ë¦¬ë©´ í¸í•˜ë‹¤ .


ì§€ê¸ˆì€ ë¦¬íŠ¸ìœ— ë¼ìš°í„°ë¥¼ ì‘ì„±ì„ í•˜ê³ ìˆë‹¤


ë¦¬íŠ¸ìœ— ê°™ì€ê²½ìš° ê²€ì‚¬ë¥¼ ì¢€ ë§ì´ í•´ì•¼í•œë‹¤.


ì‘ì„±ì„ í•˜ë‹¤ê°€

![16.íƒ€ì´í•‘ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸°ì™€ Q&A image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/image_upload/904401c070ea486fb65cdaa5f07d4e2b/079ca7c6-cb45-4115-86c0-f0da93ddb1d4.png)


ì´ì™€ ê°™ì´ ì„ ì–¸ì´ ëª…í™•í•˜ì§€ ì•Šë‹¤ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ë˜ë©´ ,


ê·¸ë•Œ ë‹¤ì‹œ models ë¡œ ê°€ì„œ ê·¸ë•Œ ì¶”ê°€ë¥¼ í•´ì¤€ë‹¤.

![16.íƒ€ì´í•‘ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸°ì™€ Q&A image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/904401c070ea486fb65cdaa5f07d4e2b/bc1dfff6-a7b3-4d5f-9082-0b666cce601e.png)


ì´ëŸ°ì‹ìœ¼ë¡œ íƒ€ì´í•‘ì„ ì¶”ê°€ë¥¼ í•´ì£¼ë©´ , ì—ëŸ¬ê°€ ì‚¬ë¼ì§€ê²Œ ëœë‹¤.

![16.íƒ€ì´í•‘ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸°ì™€ Q&A image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/904401c070ea486fb65cdaa5f07d4e2b/c1383455-dbad-4cc1-96c0-222e3ff064f6.png)


ë‹¤ì‹œ ì‘ì„±ì„ í•˜ê²Œë˜ê³  ,

```ts
const retweetTargetId = post.RetweetId || post.id;
```

![16.íƒ€ì´í•‘ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸°ì™€ Q&A image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/904401c070ea486fb65cdaa5f07d4e2b/5ad1649b-b9bb-4fcc-afd4-25cbd0bfdcd4.png)


ì´ë¶€ë¶„ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ë‹ˆê¹ ë‹¤ì‹œ models ë¡œ ê°€ì„œ ì € ë¶€ë¶„ ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ë„ë¡ í•œë‹¤.


ì‘ì„±ì„ í•˜ë‹¤ë³´ë‹ˆ ë“¤ìˆ˜ë„ ìˆëŠ” ìƒê°ì´


íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ë¼ëŠ”ê²ƒì´ ë¯¸ë¦¬ íƒ€ì…ì„ ì§€ì •í•´ì„œ ì‹¤í–‰í•˜ê¸°ì „ì— ì—ëŸ¬ë¥¼ ì¡ì•„ì£¼ëŠ” ë…€ì„ì¸ë° , ìë°”ìŠ¤í¬ë¦½íŠ¸ë„ ì‘ì„±í•˜ê³ ë‚˜ì„œ , ê±°ê¸°ì— ë§ì¶°ì„œ íƒ€ì…ì„ ì§€ì •ì„ í•œë‹¤ëŠ”ê²Œ ì˜ë¯¸ê°€ ìˆëƒ ìƒê°í• ìˆ˜ë„ ìˆë‹¤.

![16.íƒ€ì´í•‘ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸°ì™€ Q&A image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/904401c070ea486fb65cdaa5f07d4e2b/eea27b16-543d-45a9-9f6b-8a0a8e56c30c.png)

![16.íƒ€ì´í•‘ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸°ì™€ Q&A image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/904401c070ea486fb65cdaa5f07d4e2b/1b59de1d-d181-4c57-ad32-abed77015363.png)

```ts
router.post('/:id/retweet', isLoggedIn, async (req, res, next) => {
  try {
    const post = await Post.findOne({
      where: { id: req.params.id },
      include: [{
        model: Post,
        as: 'Retweet',
      }],
    });
    if (!post) {
      return res.status(404).send('í¬ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }
    if (req.user!.id === post.UserId || (post.Retweet && post.Retweet.UserId === req.user!.id)) {
      return res.status(403).send('ìì‹ ì˜ ê¸€ì€ ë¦¬íŠ¸ìœ—í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }
    const retweetTargetId = post.RetweetId || post.id;
    const exPost = await Post.findOne({
      where: {
        UserId: req.user!.id,
        RetweetId: retweetTargetId,
      },
    });
    if (exPost) {
      return res.status(403).send('ì´ë¯¸ ë¦¬íŠ¸ìœ—í–ˆìŠµë‹ˆë‹¤.');
    }
    const retweet = await Post.create({
      UserId: req.user!.id,
      RetweetId: retweetTargetId,
      content: 'retweet',
    });
    const retweetWithPrevPost = await Post.findOne({
      where: { id: retweet.id },
      include: [{
        model: User,
        attributes: ['id', 'nickname'],
      }, {
        model: Post,
        as: 'Retweet',
        include: [{
          model: User,
          attributes: ['id', 'nickname'],
        }, {
          model: Image,
        }],
      }],
    });
    return res.json(retweetWithPrevPost);
  } catch (err) {
    console.error(err);
    next(err);
  }
});
```

#  ğŸ“Œ index.ts


ì´ì œ index.ts ë¡œ ê°€ì„œ router ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.

![16.íƒ€ì´í•‘ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸°ì™€ Q&A image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/904401c070ea486fb65cdaa5f07d4e2b/ed3f2fd2-6287-461a-ab71-e913cb6f1151.png)

![16.íƒ€ì´í•‘ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸°ì™€ Q&A image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/904401c070ea486fb65cdaa5f07d4e2b/454647e0-59a0-4895-bfca-2a20b2224f1a.png)

`npm run dev` ë¥¼ ì‹¤í–‰ì„ ì‹œì¼œë³´ë©´

![16.íƒ€ì´í•‘ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸°ì™€ Q&A image](https://slid-capture.s3.ap-northeast-2.amazonaws.com/public/capture_images/904401c070ea486fb65cdaa5f07d4e2b/e8b07a16-dbe8-4295-ae38-8a2eb20426f4.png)



